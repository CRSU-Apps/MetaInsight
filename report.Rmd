---
title: "MetaInsight report"
output: html_document
params:
  outcome_type: NA
  data: NA
  label: NA
  outcome_measure: NA
  ranking: NA
  model: NA
  exclusionbox: NA
  excluded: NA
  forest: NA
  networkstyle: NA
---

```{r include = FALSE}
library(knitr)

```

### User inputs and selections

**Outcome type**  
Continuous (mean difference) or binary (odds ratio)

```{r}
params$outcome_type
```

**Study data and treatment labels**

```{r}
params$data

treatment_label(params$label)
```

**Outcome measure**  
Mean difference (MD) or standardised mean difference (SMD) for continuous data  
Odds ratio (OR), risk ratio (RR) or risk difference (RD) for binary data  

```{r}
params$outcome_measure
```

For treatment rankings, smaller outcome values (e.g. smaller mean values for continuous data, or ORs less than 1 for binary data) are desirable (good) or undesirable (bad)

```{r}
params$ranking
```

**Model**  
Random effect (RE) or fixed effect (FE)

```{r}
params$model
```

**Excluded studies**

```{r}
paste(params$excluded, collapse = (", "))
```

### MetaInsight app outputs  

**Data used for NMA** 

```{r}
knitr::kable(params$data)
```

**Summary of study characteristics**  
Characteristics table of all studies

```{r}
summary_table_plot(params$data, params$outcome_type, params$label)
```

**Summary of study characteristics**
Characteristics table with studies excluded

```{r}
summary_table_plot(filter(params$data, !Study %in% params$exclusionbox), params$outcome_type, params$label)
```

**Study results**
Individual study results (for all studies) grouped by treatment comparison

```{r}
make_netStudy(params$data, params$outcome_type, params$excluded, params$label,
              params$outcome_measure, params$model, params$forest$ForestHeader,
              params$forest$ForestTitle)$fplot

```

**Network plot**
Network plot of all studies  

Network plot style

```{r}
params$networkstyle
```

Need to fix excluded data
<!-- # ```{r} -->
<!-- # make_netgraph(freq_all(params$data, params$metaoutcome, params$label,  -->
<!-- #                        params$outcome_measure, params$model, params$excluded), 1.25) -->
<!-- # ``` -->


